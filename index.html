<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>義大利八日家庭之旅：客製化行程規劃</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <style>
        /* 確保淺色系背景和專業風格 */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f7f9fb;
        }

        /* 自定義滾動條樣式，保持專業質感 */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>

<body>

    <div id="app" class="min-h-screen">
        <nav class="bg-white shadow-lg sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <h1 class="text-2xl font-bold text-gray-800">義大利家庭之旅 (8天)</h1>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-4">
                        <button onclick="showSection('overview')"
                            class="text-gray-900 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">行程總覽</button>
                        <button onclick="showSection('transport')"
                            class="text-gray-900 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">交通住宿</button>
                        <button onclick="showSection('daily')"
                            class="text-gray-900 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">每日行程</button>
                        <button onclick="showSection('food')"
                            class="text-gray-900 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">美食地圖</button>
                        <button onclick="showSection('prep')"
                            class="text-gray-900 hover:bg-gray-100 px-3 py-2 rounded-md text-sm font-medium">行前準備</button>
                    </div>
                    <div class="sm:hidden flex items-center">
                        <button id="mobile-menu-btn" type="button"
                            class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                            <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="sm:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1">
                    <button onclick="showSection('overview'); hideMobileMenu()"
                        class="text-gray-900 hover:bg-gray-100 block w-full text-left px-3 py-2 rounded-md text-base font-medium">行程總覽</button>
                    <button onclick="showSection('transport'); hideMobileMenu()"
                        class="text-gray-900 hover:bg-gray-100 block w-full text-left px-3 py-2 rounded-md text-base font-medium">交通住宿</button>
                    <button onclick="showSection('daily'); hideMobileMenu()"
                        class="text-gray-900 hover:bg-gray-100 block w-full text-left px-3 py-2 rounded-md text-base font-medium">每日行程</button>
                    <button onclick="showSection('food'); hideMobileMenu()"
                        class="text-gray-900 hover:bg-gray-100 block w-full text-left px-3 py-2 rounded-md text-base font-medium">美食地圖</button>
                    <button onclick="showSection('prep'); hideMobileMenu()"
                        class="text-gray-900 hover:bg-gray-100 block w-full text-left px-3 py-2 rounded-md text-base font-medium">行前準備</button>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto py-8 sm:px-6 lg:px-8">

            <section id="overview" class="p-6 bg-white shadow-xl rounded-lg mb-8">
                <h2 class="text-3xl font-extrabold text-gray-800 mb-6 border-b-2 pb-2">行程總覽 (Milan-Venice-Florence-Pisa)
                </h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-3">核心數據</h3>
                        <ul class="space-y-2 text-gray-600">
                            <li><span class="font-medium text-gray-800">旅遊天數：</span> 8 天 / 7 夜</li>
                            <li><span class="font-medium text-gray-800">旅遊日期：</span> 2026/1/31 (六) - 2026/2/7 (六)</li>
                            <li><span class="font-medium text-gray-800">同行成員：</span> 三人家庭 (親子休閒風格)</li>
                            <li><span class="font-medium text-gray-800">核心主題：</span> 威尼斯嘉年華（平日體驗, 2/2）</li>
                            <li><span class="font-medium text-gray-800">總預算目標：</span> €1,920 (平均 €240/天, 家庭共三人)</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-3">城市與住宿策略 (M → V → F → M 環線)</h3>
                        <div class="flex flex-wrap items-center space-x-2 text-lg font-bold text-indigo-600 mb-4">
                            <span>米蘭 (2N)</span>
                            <span class="text-gray-400">→</span>
                            <span>威尼斯 (2N)</span>
                            <span class="text-gray-400">→</span>
                            <span>佛羅倫斯 (3N)</span>
                            <span class="text-gray-400">→</span>
                            <span>比薩 (1D)</span>
                            <span class="text-gray-400">→</span>
                            <span>米蘭 (1N)</span>
                        </div>
                        <p class="text-sm text-gray-500 italic">住宿策略：全程以 Airbnb (附洗衣間)
                            為主，威尼斯為高價日 (€140/晚)，米蘭/佛羅倫斯為基礎價日 (€93/晚)，以平衡預算與品質。</p>
                    </div>
                </div>

                <div class="mt-8 border-t pt-6">
                    <h3 class="text-xl font-semibold text-gray-700 mb-3">8日家庭預算分配概覽 (€240/天)</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        類別
                                    </th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        細項
                                    </th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        預估總成本 (€)
                                    </th>
                                    <th
                                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                        佔總預算比例 (%)
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">住宿 (7晚)</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Airbnb (附洗衣設備, 高低搭配)</td>
                                    <td class="px-6 py-4 whitespace-nowrap">745</td>
                                    <td class="px-6 py-4 whitespace-nowrap">38.8%</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">城際交通</td>
                                    <td class="px-6 py-4 whitespace-nowrap">HSR 7段票 (早鳥票價) + 機場快線</td>
                                    <td class="px-6 py-4 whitespace-nowrap">255</td>
                                    <td class="px-6 py-4 whitespace-nowrap">13.2%</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">餐飲</td>
                                    <td class="px-6 py-4 whitespace-nowrap">自炊早餐/午餐小吃/晚餐 (6晚普通, 1晚高級)</td>
                                    <td class="px-6 py-4 whitespace-nowrap">750</td>
                                    <td class="px-6 py-4 whitespace-nowrap">39.1%</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">活動/當地交通</td>
                                    <td class="px-6 py-4 whitespace-nowrap">博物館門票、水上巴士、市內交通</td>
                                    <td class="px-6 py-4 whitespace-nowrap">170</td>
                                    <td class="px-6 py-4 whitespace-nowrap">8.9%</td>
                                </tr>
                                <tr class="bg-yellow-50 font-bold">
                                    <td class="px-6 py-4 whitespace-nowrap">總計</td>
                                    <td class="px-6 py-4 whitespace-nowrap">8天7夜</td>
                                    <td class="px-6 py-4 whitespace-nowrap">1920</td>
                                    <td class="px-6 py-4 whitespace-nowrap">100%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </section>

            <section id="transport" class="p-6 bg-white shadow-xl rounded-lg mb-8 hidden">
                <h2 class="text-3xl font-extrabold text-gray-800 mb-6 border-b-2 pb-2">交通與住宿策略 (HSR & Airbnb)</h2>

                <div class="grid lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-3">城際交通時間與成本權衡 (家庭)</h3>
                        <p class="text-sm text-gray-500 italic mb-4">圖表比較各主要路線的單人票價（預購早鳥票）與最短車程時間。</p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <canvas id="transportChart"></canvas>
                        </div>

                        <div class="mt-6">
                            <h4 class="font-bold text-gray-700">交通方式建議:</h4>
                            <ul class="list-disc list-inside text-gray-600 text-sm space-y-1 mt-2">
                                <li>**機場接駁：** 推薦 **Malpensa Express** (火車) [1]
                                    ，雖然較巴士略貴，但可節省約 18 分鐘，確保家庭入境後迅速抵達市區。</li>
                                <li>**城際移動：** 採用高速鐵路 **Italo / Trenitalia** [2, 3, 4]
                                    ，建議提早預訂 Super Economy 或 Economy 票種以鎖定最低價格。</li>
                                <li>**當地交通：** 米蘭/佛羅倫斯主要靠步行及地鐵；威尼斯則依賴 Vaporetto (水上巴士)。</li>
                            </ul>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-3">住宿規劃：家庭式 Airbnb (附洗衣設備)</h3>
                        <div class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-bold text-blue-800">米蘭 & 佛羅倫斯 (基礎舒適型)</h4>
                                <p class="text-sm text-blue-700 mt-1">地理位置：靠近主要火車站（Milano Centrale / Firenze SMN），方便長途轉場，減少行李搬運體力消耗 [5, 6]。</p>
                                <p class="text-sm text-blue-700 mt-1">平均預估費用：約 €93 - €103/晚 (含洗衣設施) [5, 6]。</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-bold text-green-800">威尼斯 (高級體驗日)</h4>
                                <p class="text-sm text-green-700 mt-1">地理位置：推薦 Dorsoduro 或 Cannaregio 區，雖然需要 Vaporetto 轉場，但相對安靜，更貼近在地生活，以平衡高住宿費 [7]。</p>
                                <p class="text-sm text-green-700 mt-1">平均預估費用：約 €140 - €146/晚 (嘉年華期間價格較高) [8]。</p>
                            </div>
                        </div>
                        <div class="mt-6 border-t pt-4">
                            <h4 class="font-bold text-gray-700">住宿篩選要點：</h4>
                            <ul class="list-disc list-inside text-gray-600 text-sm space-y-1 mt-2">
                                <li>務必篩選具備 `Washer` 設施的房源 [9]。</li>
                                <li>自炊：充分利用廚房設備準備早餐或輕食，以嚴格控制每日餐飲預算 (€39/人/天) [10, 11]。</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </section>

            <section id="daily" class="p-6 bg-white shadow-xl rounded-lg mb-8 hidden">
                <h2 class="text-3xl font-extrabold text-gray-800 mb-6 border-b-2 pb-2">每日行程時間軸 (D1 - D8)</h2>
                <p class="text-sm text-gray-500 italic mb-6">所有活動、路線規劃皆為建議時間，並附有 Google Maps 連結，方便導航。</p>

                <div class="relative max-w-4xl mx-auto">
                    <div class="border-l-2 border-indigo-400 absolute h-full top-0 left-6 sm:left-1/2 -ml-0.5"></div>

                    <div class="mb-8 flex justify-between items-center w-full right-timeline">
                        <div class="order-1 w-5/12 hidden sm:block"></div>
                        <div class="z-10 flex items-center order-1 bg-indigo-500 shadow-xl w-12 h-12 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">D1</h1>
                        </div>
                        <div class="order-1 sm:w-5/12 w-full sm:px-6 py-4 bg-gray-100 rounded-lg shadow-md">
                            <p class="text-xs text-gray-500">1/31 (六)</p>
                            <h3 class="mb-3 font-bold text-lg text-indigo-600">米蘭：入境與綠色休閒</h3>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li>**07:00-11:00** 入境 MXP → <a href="https://www.google.com/maps/search/?api=1&query=Malpensa+Express+to+Milano+Centrale" target="_blank" class="text-blue-500 hover:underline">Malpensa Express</a> (52分) → 入住/寄放行李 [1]</li>
                                <li>**11:30-13:30** 探索：森皮奧內公園 (Parco Sempione) - 2H (休閒)<a href="https://www.google.com/maps/search/?api=1&query=Parco+Sempione+Milan" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [12]</li>
                                <li>**13:30-14:30** 午餐：在地街頭小吃 (Panzerotti/Pizza Slice)</li>
                                <li>**15:00-17:30** 城市地標：米蘭大教堂 (Duomo di Milano) 及其廣場 - 2.5H (外部)<a href="https://www.google.com/maps/search/?api=1&query=Duomo+di+Milano" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [13]</li>
                                <li>**19:30-21:00** 晚餐：簡單 Osteria/自炊 (預算控制)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mb-8 flex justify-between items-center w-full left-timeline">
                        <div class="order-1 sm:w-5/12 w-full sm:px-6 py-4 bg-gray-100 rounded-lg shadow-md">
                            <p class="text-xs text-gray-500">2/1 (日)</p>
                            <h3 class="mb-3 font-bold text-lg text-indigo-600">米蘭：歷史與轉場威尼斯</h3>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li>**09:00-11:30** 探索：斯福爾扎城堡 (Castello Sforzesco) - 2.5H (家庭友好)<a href="https://www.google.com/maps/search/?api=1&query=Castello+Sforzesco+Milan" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [14]</li>
                                <li>**11:30-13:00** 休閒：布雷拉區 (Brera) 散步 [12]</li>
                                <li>**14:00-15:30** 返回 Airbnb 領取行李，前往米蘭中央車站 <a href="https://www.google.com/maps/search/?api=1&query=Milano+Centrale" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a></li>
                                <li>**16:00-18:15** <span class="font-semibold">HSR：米蘭 → 威尼斯</span> (2H 15M) [4]</li>
                                <li>**18:30-20:00** 轉場至威尼斯 Airbnb (需搭乘 Vaporetto 水上巴士)</li>
                                <li>**20:00-21:30** 晚餐：威尼斯 Cannaregio 簡單晚餐 [7]</li>
                            </ul>
                        </div>
                        <div class="z-10 flex items-center order-1 bg-indigo-500 shadow-xl w-12 h-12 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">D2</h1>
                        </div>
                        <div class="order-1 w-5/12 hidden sm:block"></div>
                    </div>

                    <div class="mb-8 flex justify-between items-center w-full right-timeline">
                        <div class="order-1 w-5/12 hidden sm:block"></div>
                        <div class="z-10 flex items-center order-1 bg-indigo-500 shadow-xl w-12 h-12 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">D3</h1>
                        </div>
                        <div class="order-1 sm:w-5/12 w-full sm:px-6 py-4 bg-gray-100 rounded-lg shadow-md">
                            <p class="text-xs text-gray-500">2/2 (一)</p>
                            <h3 class="mb-3 font-bold text-lg text-indigo-600">威尼斯：嘉年華體驗與離島工藝</h3>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li>**09:30-12:30** **威尼斯嘉年華核心體驗**：聖馬可廣場周邊盛裝遊客與街頭表演 - 3H (平日)<a href="https://www.google.com/maps/search/?api=1&query=St+Mark%27s+Square+Venice" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [15, 16]</li>
                                <li>**12:30-13:30** 午餐：Rialto 附近的 Cicchetti (威尼斯小吃)</li>
                                <li>**13:30-16:30** 離島探索：穆拉諾島 (Murano) 參觀玻璃工藝 - 3H (含交通)<a href="https://www.google.com/maps/search/?api=1&query=Murano+Island+Venice" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [17]</li>
                                <li>**16:30-18:00** 探索：里亞爾托橋 (Ponte di Rialto) 區域<a href="https://www.google.com/maps/search/?api=1&query=Rialto+Bridge+Venice" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [18]</li>
                                <li>**18:30-20:30** **高級晚餐日**：在地海鮮 Trattoria (如 Antiche Carampane) [17]</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mb-8 flex justify-between items-center w-full left-timeline">
                        <div class="order-1 sm:w-5/12 w-full sm:px-6 py-4 bg-gray-100 rounded-lg shadow-md">
                            <p class="text-xs text-gray-500">2/3 (二)</p>
                            <h3 class="mb-3 font-bold text-lg text-indigo-600">威尼斯：離島與轉場佛羅倫斯</h3>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li>**09:00-12:00** 離島探索：布拉諾島 (Burano) - 彩色房屋 - 3H (含交通)<a href="https://www.google.com/maps/search/?api=1&query=Burano+Island+Venice" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [17]</li>
                                <li>**12:00-13:00** 午餐：返回主島簡餐</li>
                                <li>**13:00-14:30** 休閒：貢多拉遊船 (自選) 或自由活動 [19]</li>
                                <li>**14:30-15:30** 回 Airbnb 領行李，前往威尼斯聖塔露西亞車站</li>
                                <li>**16:00-18:00** <span class="font-semibold">HSR：威尼斯 → 佛羅倫斯</span> (2H 0M) [3]</li>
                                <li>**18:30-20:00** 轉場至佛羅倫斯 Airbnb 入住</li>
                                <li>**20:00-21:30** 晚餐：佛羅倫斯在地晚餐 (Trattoria)</li>
                            </ul>
                        </div>
                        <div class="z-10 flex items-center order-1 bg-indigo-500 shadow-xl w-12 h-12 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">D4</h1>
                        </div>
                        <div class="order-1 w-5/12 hidden sm:block"></div>
                    </div>

                    <div class="mb-8 flex justify-between items-center w-full right-timeline">
                        <div class="order-1 w-5/12 hidden sm:block"></div>
                        <div class="z-10 flex items-center order-1 bg-indigo-500 shadow-xl w-12 h-12 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">D5</h1>
                        </div>
                        <div class="order-1 sm:w-5/12 w-full sm:px-6 py-4 bg-gray-100 rounded-lg shadow-md">
                            <p class="text-xs text-gray-500">2/4 (三)</p>
                            <h3 class="mb-3 font-bold text-lg text-indigo-600">佛羅倫斯：文藝復興與全景</h3>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li>**09:00-11:30** 聖母百花大教堂 (Duomo) 及其廣場 - 2.5H<a href="https://www.google.com/maps/search/?api=1&query=Duomo+Florence" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [20]</li>
                                <li>**11:30-12:30** 午餐：街頭小吃 Lampredotto (如 Da Nerbone) [21]</li>
                                <li>**13:00-15:30** 老橋 (Ponte Vecchio) 與阿諾河畔漫步 - 2.5H (休閒)<a href="https://www.google.com/maps/search/?api=1&query=Ponte+Vecchio+Florence" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [22]</li>
                                <li>**16:00-18:00** **自然景點**：米開朗基羅廣場 (Piazzale Michelangelo) 俯瞰城市全景 - 2H<a href="https://www.google.com/maps/search/?api=1&query=Piazzale+Michelangelo" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [23]</li>
                                <li>**19:30-21:30** 晚餐：傳統托斯卡納 Trattoria (如 Trattoria Sabatino) [24]</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mb-8 flex justify-between items-center w-full left-timeline">
                        <div class="order-1 sm:w-5/12 w-full sm:px-6 py-4 bg-gray-100 rounded-lg shadow-md">
                            <p class="text-xs text-gray-500">2/5 (四)</p>
                            <h3 class="mb-3 font-bold text-lg text-indigo-600">比薩：高效一日遊</h3>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li>**08:30-09:30** <span class="font-semibold">區間火車：佛羅倫斯 $\rightarrow$ 比薩中央車站</span> (51分) [25]</li>
                                <li>**10:00-13:00** 奇蹟廣場 (Piazza dei Miracoli)：斜塔、大教堂、浸禮堂 - 3H<a href="https://www.google.com/maps/search/?api=1&query=Piazza+dei+Miracoli+Pisa" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [26]</li>
                                <li>**13:00-14:00** 午餐：比薩當地簡餐</li>
                                <li>**14:00-15:30** 休閒：阿諾河畔散步與聖瑪利亞教堂<a href="https://www.google.com/maps/search/?api=1&query=Santa+Maria+della+Spina+Pisa" target="_blank" class="text-blue-500 hover:underline"> [地圖]</a> [27]</li>
                                <li>**16:00-17:00** <span class="font-semibold">區間火車：比薩 $\rightarrow$ 佛羅倫斯 SMN 車站</span> (51分) [25]</li>
                                <li>**17:30-19:30** 佛羅倫斯市區購物/休整</li>
                                <li>**19:30-21:00** 晚餐：Scegliaccia 三明治 (Schiacciata) [21]</li>
                            </ul>
                        </div>
                        <div class="z-10 flex items-center order-1 bg-indigo-500 shadow-xl w-12 h-12 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">D6</h1>
                        </div>
                        <div class="order-1 w-5/12 hidden sm:block"></div>
                    </div>

                    <div class="mb-8 flex justify-between items-center w-full right-timeline">
                        <div class="order-1 w-5/12 hidden sm:block"></div>
                        <div class="z-10 flex items-center order-1 bg-indigo-500 shadow-xl w-12 h-12 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">D7</h1>
                        </div>
                        <div class="order-1 sm:w-5/12 w-full sm:px-6 py-4 bg-gray-100 rounded-lg shadow-md">
                            <p class="text-xs text-gray-500">2/6 (五)</p>
                            <h3 class="mb-3 font-bold text-lg text-indigo-600">轉場回米蘭與壓軸高級晚餐</h3>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li>**09:30-12:00** 探索：奧爾特拉諾區 (Oltrarno) 藝術工匠區 或 波波里花園 [23]</li>
                                <li>**12:00-13:30** 午餐：自炊或車站附近簡餐</li>
                                <li>**13:30-14:30** 領取行李，前往佛羅倫斯 SMN 車站</li>
                                <li>**15:00-16:45** <span class="font-semibold">HSR：佛羅倫斯 $\rightarrow$ 米蘭中央車站</span> (1H 43M) [2]</li>
                                <li>**17:00-18:00** 前往米蘭中央車站附近 Airbnb 入住</li>
                                <li>**19:30-21:30** **高級晚餐體驗**：傳統米蘭美食 (如 Trattoria Masuelli San Marco) [28]</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mb-8 flex justify-between items-center w-full left-timeline">
                        <div class="order-1 sm:w-5/12 w-full sm:px-6 py-4 bg-gray-100 rounded-lg shadow-md">
                            <p class="text-xs text-gray-500">2/7 (六)</p>
                            <h3 class="mb-3 font-bold text-lg text-indigo-600">米蘭：離境準備</h3>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li>**08:00-09:30** 早餐與最後準備</li>
                                <li>**09:30-10:30** <span class="font-semibold">Malpensa Express：米蘭中央車站 $\rightarrow$ MXP 機場</span> (52分) [1]</li>
                                <li>**11:00** MXP 機場離境 (7:00 AM 辦理登機)</li>
                            </ul>
                        </div>
                        <div class="z-10 flex items-center order-1 bg-indigo-500 shadow-xl w-12 h-12 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">D8</h1>
                        </div>
                        <div class="order-1 w-5/12 hidden sm:block"></div>
                    </div>

                </div>
            </section>

            <section id="food" class="p-6 bg-white shadow-xl rounded-lg mb-8 hidden">
                <h2 class="text-3xl font-extrabold text-gray-800 mb-6 border-b-2 pb-2">美食地圖 (精選餐廳推薦)</h2>
                <p class="text-sm text-gray-500 italic mb-4">精選各城市 2-3 間必嚐在地美食，請利用下方的篩選器快速尋找。</p>

                <div class="flex flex-wrap gap-3 mb-8">
                    <button onclick="filterRestaurants('All')"
                        class="px-4 py-2 bg-indigo-600 text-white rounded-full text-sm font-medium hover:bg-indigo-700 transition">所有餐廳</button>
                    <button onclick="filterRestaurants('Seafood')"
                        class="px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-300 transition">海鮮 (Seafood)</button>
                    <button onclick="filterRestaurants('Street Food')"
                        class="px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-300 transition">小吃/街頭食品
                        (Street Food)</button>
                    <button onclick="filterRestaurants('Traditional Dining')"
                        class="px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-300 transition">傳統正餐
                        (Traditional Dining)</button>
                </div>

                <div id="restaurant-list" class="grid lg:grid-cols-3 md:grid-cols-2 gap-6">

                    <div class="restaurant-card p-4 border rounded-lg bg-gray-50 hover:shadow-lg transition duration-300"
                        data-category="Traditional Dining">
                        <h4 class="text-xl font-bold text-gray-800">Osteria La Piola</h4>
                        <p class="text-indigo-600 font-medium">米蘭 | 傳統/在地</p>
                        <p class="text-sm text-gray-600 mt-2">必嚐菜餚：Risotto alla Milanese (米蘭燉飯)、Cotoletta (炸肉排) [28]</p>
                        <p class="text-sm text-gray-600">預算：€€ (中等)</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Osteria+La+Piola+Milan" target="_blank"
                            class="text-blue-500 hover:text-blue-700 text-sm font-medium mt-3 inline-block">Google Maps 連結</a>
                    </div>

                    <div class="restaurant-card p-4 border rounded-lg bg-gray-50 hover:shadow-lg transition duration-300"
                        data-category="Traditional Dining">
                        <h4 class="text-xl font-bold text-gray-800">Trattoria Masuelli San Marco</h4>
                        <p class="text-indigo-600 font-medium">米蘭 | 高級傳統 (D7 壓軸晚餐)</p>
                        <p class="text-sm text-gray-600 mt-2">必嚐菜餚：Ossobuco (燉牛膝)、Mondeghili (米蘭肉丸) [28, 29]</p>
                        <p class="text-sm text-gray-600">預算：€€€ (較高)</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Trattoria+Masuelli+San+Marco"
                            target="_blank" class="text-blue-500 hover:text-blue-700 text-sm font-medium mt-3 inline-block">Google
                            Maps 連結</a>
                    </div>

                    <div class="restaurant-card p-4 border rounded-lg bg-gray-50 hover:shadow-lg transition duration-300"
                        data-category="Street Food">
                        <h4 class="text-xl font-bold text-gray-800">Da Nerbone (中央市場)</h4>
                        <p class="text-indigo-600 font-medium">佛羅倫斯 | 街頭小吃 (省預算首選)</p>
                        <p class="text-sm text-gray-600 mt-2">必嚐菜餚：Lampredotto (牛肚包)、燉牛肉三明治 [30]</p>
                        <p class="text-sm text-gray-600">預算：€ (低)</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Da+Nerbone+Mercato+Centrale"
                            target="_blank" class="text-blue-500 hover:text-blue-700 text-sm font-medium mt-3 inline-block">Google
                            Maps 連結</a>
                    </div>

                    <div class="restaurant-card p-4 border rounded-lg bg-gray-50 hover:shadow-lg transition duration-300"
                        data-category="Traditional Dining">
                        <h4 class="text-xl font-bold text-gray-800">Trattoria Sabatino</h4>
                        <p class="text-indigo-600 font-medium">佛羅倫斯 | 傳統/預算</p>
                        <p class="text-sm text-gray-600 mt-2">必嚐菜餚：Ribollita (蔬菜麵包湯)、托斯卡納農家菜 [21, 24]</p>
                        <p class="text-sm text-gray-600">預算：€€ (中低)</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Trattoria+Sabatino+Florence"
                            target="_blank" class="text-blue-500 hover:text-blue-700 text-sm font-medium mt-3 inline-block">Google
                            Maps 連結</a>
                    </div>

                    <div class="restaurant-card p-4 border rounded-lg bg-gray-50 hover:shadow-lg transition duration-300"
                        data-category="Street Food">
                        <h4 class="text-xl font-bold text-gray-800">Cantina Do Spade</h4>
                        <p class="text-indigo-600 font-medium">威尼斯 | Cicchetti/小吃 (預算型晚餐)</p>
                        <p class="text-sm text-gray-600 mt-2">必嚐菜餚：Cicchetti (威尼斯特色小份開胃菜)、在地葡萄酒 [18, 31]</p>
                        <p class="text-sm text-gray-600">預算：€ (低)</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Cantina+Do+Spade+Venice" target="_blank"
                            class="text-blue-500 hover:text-blue-700 text-sm font-medium mt-3 inline-block">Google Maps 連結</a>
                    </div>

                    <div class="restaurant-card p-4 border rounded-lg bg-gray-50 hover:shadow-lg transition duration-300"
                        data-category="Seafood, Traditional Dining">
                        <h4 class="text-xl font-bold text-gray-800">Antiche Carampane</h4>
                        <p class="text-indigo-600 font-medium">威尼斯 | 海鮮/高級</p>
                        <p class="text-sm text-gray-600 mt-2">必嚐菜餚：新鮮海鮮、在地漁獲 (建議 D3 或 D4 晚餐) [17, 32]</p>
                        <p class="text-sm text-gray-600">預算：€€€ (較高)</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Antiche+Carampane+Venice"
                            target="_blank" class="text-blue-500 hover:text-blue-700 text-sm font-medium mt-3 inline-block">Google
                            Maps 連結</a>
                    </div>

                </div>
            </section>

            <section id="prep" class="p-6 bg-white shadow-xl rounded-lg mb-8 hidden">
                <h2 class="text-3xl font-extrabold text-gray-800 mb-6 border-b-2 pb-2">行前準備 (家庭與冬季清單)</h2>

                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-3">文件與實用資訊</h3>
                        <ul class="list-disc list-inside text-gray-600 space-y-3">
                            <li>**必備文件：** 護照、機票、旅行保險、住宿（Airbnb）及高速列車車票的紙本/電子副本 [33]。</li>
                            <li>**親子證明：** 若有孩童姓氏與同行成人不同，務必攜帶出生證明或相關文件，以備邊境檢查 [33]。</li>
                            <li>**電器準備：** 義大利插座為兩圓孔（部分地區三圓孔），需準備**歐規轉接頭** [34]。</li>
                            <li>**通訊：** 建議抵達後購買當地 SIM 卡或預先租借 WiFi 機。</li>
                            <li>**緊急藥物：** 備妥個人藥物及處方籤翻譯本，以及基本急救包 [33]。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-3">冬季衣物與著裝建議</h3>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h4 class="font-bold text-yellow-800">冬季洋蔥式穿法 (1月底 - 2月初)</h4>
                            <p class="text-sm text-yellow-700 mt-2">義大利此時較為濕冷，尤其威尼斯濕度高，體感溫度低，保暖與防風防水是關鍵 [33]。</p>
                            <ul class="list-disc list-inside text-sm text-yellow-900 mt-2 space-y-1">
                                <li>**內層 (Base Layer)：** 保暖內衣（Thermal Top），用於極冷或戶外活動日 [33]。</li>
                                <li>**中層 (Mid Layer)：** 羊毛衫/保暖毛衣。</li>
                                <li>**外層 (Outer Layer)：** 具備**防風、防水**功能的厚外套或冬季夾克 [33]。</li>
                                <li>**鞋類：** 選擇防雨、保暖的休閒鞋或踝靴，避免不適合長距離步行的鞋子。</li>
                                <li>**配件：** 圍巾、手套、帽子為必需品 [33]。</li>
                                <li>**宗教場所：** 參觀教堂（如米蘭大教堂 Duomo）時，需遵守遮蓋膝蓋和肩膀的著裝要求 [35]。</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </section>

        </main>
    </div>

    <script>
        // 1. 導覽列切換邏輯 (SPA Navigation)
        function showSection(sectionId) {
            const sections = ['overview', 'transport', 'daily', 'food', 'prep'];
            sections.forEach(id => {
                const section = document.getElementById(id);
                if (section) {
                    section.classList.add('hidden');
                }
            });
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
            window.scrollTo({ top: 0, behavior: 'smooth' }); // 平滑滾動到頂部
        }

        // 預設顯示 'overview'
        document.addEventListener('DOMContentLoaded', () => {
            showSection('overview');
            initializeChart();
        });

        // 手機選單切換
        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        });

        function hideMobileMenu() {
            document.getElementById('mobile-menu').classList.add('hidden');
        }


        // 2. 美食分類篩選器邏輯 (Native JS Filtering)
        function filterRestaurants(category) {
            const cards = document.querySelectorAll('.restaurant-card');
            cards.forEach(card => {
                const categories = card.getAttribute('data-category').split(',').map(c => c.trim());

                if (category === 'All' |

| categories.includes(category)) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });

            // 更新按鈕樣式 (可選：增加視覺回饋)
            document.querySelectorAll('#food button').forEach(button => {
                const buttonCategory = button.innerText.split('(').trim();
                if (category === 'All' && button.innerText.includes('所有餐廳')) {
                    button.classList.remove('bg-gray-200', 'text-gray-700');
                    button.classList.add('bg-indigo-600', 'text-white');
                } else if (buttonCategory === category) {
                    button.classList.remove('bg-gray-200', 'text-gray-700');
                    button.classList.add('bg-indigo-600', 'text-white');
                } else if (button.innerText.includes('所有餐廳')) {
                    // Skip if it's the 'All' button but 'category' is not 'All'
                } else {
                    button.classList.remove('bg-indigo-600', 'text-white');
                    button.classList.add('bg-gray-200', 'text-gray-700');
                }
            });
        }


        // 3. Chart.js 數據視覺化 (交通時間與成本)
        function initializeChart() {
            const ctx = document.getElementById('transportChart');

            // 數據來自初始報告中的 "高速鐵路交通時間與費用概覽" 表格
            const transportData = {
                labels:,
                // 時間數據 (分鐘)
                time: [
                    52, // [1]
                    135, // 2小時15分 [4]
                    120, // 2小時0分 [3]
                    103 // 1小時43分 [2],
                // 成本數據 (家庭三人總計歐元 - 早鳥票價)
                cost: [
                    15 * 3, // €15/人 [1]
                    14.90 * 3, // €14.90/人 [4]
                    18.90 * 3, // €18.90/人 [3]
                    17.90 * 3 // €17.90/人 [2]
            };

            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: transportData.labels,
                    datasets:
                },
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    let label = context.dataset.label |

| '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y!== null) {
                                        if (context.dataset.yAxisID === 'y') {
                                            label += context.parsed.y + ' 分鐘';
                                        } else {
                                            label += '€' + context.parsed.y.toFixed(2);
                                        }
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '時間 (分鐘)',
                                color: 'rgba(59, 130, 246, 1)'
                            },
                            beginAtZero: true
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '家庭總成本 (€)',
                                color: 'rgba(234, 179, 8, 1)'
                            },
                            grid: {
                                drawOnChartArea: false
                            },
                            ticks: {
                                callback: function (value) {
                                    return '€' + value;
                                }
                            }
                        }
                    }
                }
            });
        }

        // 初始化美食篩選器
        document.addEventListener('DOMContentLoaded', () => {
            filterRestaurants('All');
        });

    </script>
</body>

</html>
